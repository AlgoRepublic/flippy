<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:paper="components.*" width="546" height="334" creationComplete="init()">
	<mx:Script>
		<![CDATA[
			import mx.events.NumericStepperEvent;
			import mx.events.ColorPickerEvent;
			import mx.core.UIComponent;
			import mx.collections.ArrayCollection;
			import mx.controls.Button;
			private var tools:ArrayCollection;
			
			private function init():void {
				tools = new ArrayCollection([rectangleTool, ovalTool, lineTool, penTool]);
			}
			
			private function selectATool(tool:Button):void {
				var arr:Array = tools.source;
				for (var i:int = 0; i < arr.length; i++) {
					if (arr[i] != tool) {
						(arr[i] as Button).selected = false;
					}
				}
				tool.selected = true;
				drawPaper.tool = tool.id;
			}
			
			private function strokeColorChanged(event:ColorPickerEvent):void
			{
				drawPaper.strokeColor = event.color;
			}
			
			private function fillColorChanged(event:ColorPickerEvent):void
			{
				drawPaper.fillColor = event.color;
			}
			
			private function fillAlphaChanged(event:NumericStepperEvent):void
			{
				drawPaper.fillAlpha = event.value / 100;
			}
			
			private function strokeThicknessChanged(event:NumericStepperEvent):void
			{
				drawPaper.strokeThickness = event.value;
			}
		]]>
	</mx:Script>
	<mx:HBox width="100%" height="100%">
	
		<mx:VBox>
			<mx:Button label="Rectangle" width="100%" id="rectangleTool" selected="true" click="selectATool(rectangleTool)"/>
			<mx:Button label="Oval" width="100%" id="ovalTool" click="selectATool(ovalTool)"/>
			<mx:Button label="Line" width="100%" id="lineTool" click="selectATool(lineTool)"/>
			<mx:Button label="Pen" width="100%" id="penTool" click="selectATool(penTool)"/>
			<mx:Button label="Clear" width="100%" id="clearTool" click="drawPaper.clear()"/>
			<mx:Form paddingLeft="0" paddingTop="0" paddingRight="0" width="100%">
				<mx:FormItem label="Stroke" width="100%">
					<mx:ColorPicker change="strokeColorChanged(event)"/>
				</mx:FormItem>
				<mx:FormItem label="Fill" width="100%">
					<mx:HBox>
						<mx:ColorPicker change="fillColorChanged(event)"/>
						<mx:CheckBox id="fillColorCheck" change="drawPaper.opaque = !fillColorCheck.selected"/>
					</mx:HBox>
				</mx:FormItem>
				<mx:FormItem label="Alpha">
					<mx:NumericStepper width="53" value="100" stepSize="1" minimum="0" maximum="100" change="fillAlphaChanged(event)"/>
				</mx:FormItem>
				<mx:FormItem label="Tickness">
					<mx:NumericStepper width="53" value="1" stepSize="1" change="strokeThicknessChanged(event)"/>
				</mx:FormItem>
			</mx:Form>
		</mx:VBox>
		
		<paper:Paper id="drawPaper" focusEnabled="true" borderStyle="solid" height="100%" width="100%"/>
	</mx:HBox>
</mx:Canvas>
